<template>
  <!-- Ø²Ø± Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù… --> <div class="fixed bottom-6 left-6 z-40"> <button @click="isOpen = !isOpen" class="flex items-center justify-center hover:scale-110 transition-transform duration-200" >
     <img :src="chatIcon" alt="chat" class="w-20 h-20 object-contain" /> </button> </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´Ø§Øª --> <transition name="fade"> <div v-if="isOpen" :class="[ 'fixed z-40 bg-white border border-slate-200 flex flex-col transition-all duration-300 overflow-hidden shadow-2xl', isMaximized ? 'inset-0 w-full h-full rounded-none' : 'bottom-24 left-6 w-[400px] h-[520px] rounded-2xl' ]" >

      
      <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
      <div class="flex items-center justify-between px-4 py-3 bg-[#0A8096] text-white">

        <!-- ğŸ”¹ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© + Ø§Ù„Ù†Øµ ÙÙŠ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-full bg-white/20 border border-white/40 flex items-center justify-center overflow-hidden">
            <img :src="chatIcon" class="w-full h-full object-cover" />
          </div>
          <span class="text-lg font-semibold tracking-wide">Ø§Ù„Ù‡ÙŠØ¦Ø©</span>
        </div>

        <!-- ğŸ”¹ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙƒØ¨ÙŠØ± + Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ ÙÙŠ Ø§Ù„ÙŠØ³Ø§Ø± -->
        <div class="flex items-center gap-4 text-xl">
          <button @click="toggleMax" class="hover:scale-110 transition-transform">â¤¢</button>
          <button @click="closeChat" class="hover:scale-110 transition-transform">âœ•</button>
        </div>
      </div>

<!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
<div class="flex-1 bg-[#F4F7F8] px-4 py-5 overflow-y-auto" dir="rtl">

  <!-- Ø±Ø³Ø§Ù„Ø© Ø¨ÙˆØª 1 -->
  <div class="mb-6">
    <div class="flex justify-start">   <!-- â† Ø§Ù„Ø¢Ù† ØªØ¸Ù‡Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
      <div class="flex items-start gap-3">

        <!-- Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© (ÙŠÙ…ÙŠÙ†) -->
        <div class="w-8 h-8 rounded-full bg-white border border-slate-300 flex items-center justify-center overflow-hidden">
          <img :src="chatIcon" class="w-full h-full object-cover" />
        </div>

        <!-- Ø§Ù„ÙÙ‚Ø§Ø¹Ø© (ÙŠØ³Ø§Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù„ÙƒÙ† ÙƒÙ„Ù‡Ø§ ÙŠÙ…ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø©) -->
        <div class="max-w-[75%] bg-white rounded-2xl rounded-tl-none px-4 py-2 text-sm text-slate-900 shadow">
          Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ.
        </div>

      </div>
    </div>

    <!-- Ø§Ù„ÙˆÙ‚Øª -->
    <div class="text-[11px] text-slate-500 text-left pl-12 mt-1">
      6:52 PM
    </div>
  </div>

  <!-- Ø±Ø³Ø§Ù„Ø© Ø¨ÙˆØª 2 -->
  <div class="mb-6">
    <div class="flex justify-start">
      <div class="flex items-start gap-3">

        <!-- Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© -->
        <div class="w-8 h-8 rounded-full bg-white border border-slate-300 flex items-center justify-center overflow-hidden">
          <img :src="chatIcon" class="w-full h-full object-cover" />
        </div>

        <!-- Ø§Ù„ÙÙ‚Ø§Ø¹Ø© -->
        <div class="max-w-[75%] bg-white rounded-2xl rounded-tl-none px-4 py-2 text-sm text-slate-900 shadow">
          ÙƒÙŠÙ Ø£Ø³ØªØ·ÙŠØ¹ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ
        </div>

      </div>
    </div>

    <div class="text-[11px] text-slate-500 text-left pl-12 mt-1">
      6:52 PM
    </div>
  </div>

</div>


      <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
      <div class="border-t border-slate-200 bg-white px-4 py-3" dir="rtl">
        <div class="relative">

          <input
            type="text"
            v-model="message"
            @keyup.enter="sendMessage"
            class="w-full rounded-3xl border border-slate-300 bg-[#F8FCFF] pr-12 pl-4 py-3 text-sm text-slate-700 outline-none"
            placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."
          />

          <button
            @click="sendMessage"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-[#1AA3C4] text-2xl rotate-180"
          >
            â¤
          </button>

        </div>

      </div>

    </div>
  </transition>
</template>

<script setup>
import { ref } from 'vue'
import chatIcon from '@/assets/images/chat-icon.png'

const isOpen = ref(false)
const isMaximized = ref(false)
const message = ref('')

const sendMessage = () => {
  if (!message.value.trim()) return
  console.log('Ø±Ø³Ø§Ù„Ø© Ù…Ø±Ø³Ù„Ø©:', message.value)
  message.value = ''
}

// ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù…Ù† Ø²Ø± Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
const toggleOpen = () => {
  // Ù„Ùˆ ÙƒØ§Ù† Ù…ØºÙ„Ù‚ â†’ Ø§ÙØªØ­Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ØµØºÙŠØ±
  if (!isOpen.value) {
    isMaximized.value = false
    isOpen.value = true
  } else {
    // Ù„Ùˆ Ù…ÙØªÙˆØ­ â†’ ÙŠÙ‚ÙÙ„ ÙÙ‚Ø·
    isOpen.value = false
  }
}

// Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø§Øª
const closeChat = () => {
  isOpen.value = false
  isMaximized.value = false // Ø¹Ø´Ø§Ù† ÙŠØ±Ø¬Ø¹ ØµØºÙŠØ± Ù„Ù…Ø§ Ù†ÙØªØ­ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©
}

const toggleMax = () => {
  isMaximized.value = !isMaximized.value
}
</script>

<style scoped>
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s ease;
}
.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
